var GA4_RS=function(e){"use strict";function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function i(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}var d=3,p=function(){var e;d<=2&&(e=console).log.apply(e,arguments)},y=function(){var e;d<=3&&(e=console).warn.apply(e,arguments)},m=function(){var e;d<=4&&(e=console).error.apply(e,arguments)},g="RS_JS_SDK",v=["Request failed with status:"],h=function(e){var t,r=null===(t=window.RudderStackGlobals)||void 0===t?void 0:t.errorReporting;r&&e instanceof Error&&r.notify(e)},_=function(e,t){try{return JSON.stringify(e,(r=[],function(e,t){if("object"!==l(t)||null===t)return t;for(;r.length>0&&r[r.length-1]!==this;)r.pop();return r.includes(t)?(p("Circular Reference detected for key: ".concat(e)),"[Circular Reference]"):(r.push(t),t)}))}catch(n){return y("Failed to convert the value to a JSON string."),null}var r},b=function(e){return e?0===Object.keys(e).length:(y("input is undefined or null"),!0)},C=function(e,t,r){var n,o;try{n="string"==typeof e?e:e instanceof Error||e.message?e.message:_(e)}catch(i){n=""}if("object"===l(o=e)&&null!==o&&"target"in o){if(e.target&&"script"!==e.target.localName)return"";if(e.target.dataset&&(e.target.dataset.loader!==g||"true"!==e.target.dataset.isnonnativesdk))return"";if(n="error in script loading:: src::  ".concat(e.target.src," id:: ").concat(e.target.id),"ad-block"===e.target.id)return r.page("RudderJS-Initiated","ad-block page request",{path:"/ad-blocked",title:n},r.sendAdblockPageOptions),""}return"[handleError]::".concat("",' "').concat(n,'"')},w=function(e,t,r){var n;try{n=C(e,0,r)}catch(o){m("[handleError] Exception:: ",o),m("[handleError] Original error:: ",_(e)),h(o)}n&&(m(n),function(e){return!e.message||!v.some((function(t){return e.message.includes(t)}))}(e)&&h(e))},A="GA4",O="Google Analytics 4 (GA4)";function E(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}i({},O,"GA4"),i(i(i(i(i(i(i(i(i(i({},A,A),"Google Analytics 4",A),"Google analytics 4",A),"google analytics 4",A),"Google Analytics4",A),"Google analytics4",A),"google analytics4",A),"Google Analytics 4 (GA4)",A),"google analytics 4 (ga4)",A),"GoogleAnalytics4",A);var I,S,j,K,k,F,D,R={exports:{}};function P(){if(S)return I;S=1;var e=1e3,t=60*e,r=60*t,n=24*r,o=7*n,i=365.25*n;function a(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}return I=function(s,c){c=c||{};var u=l(s);if("string"===u&&s.length>0)return function(a){if((a=String(a)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!s)return;var c=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*t;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(s);if("number"===u&&isFinite(s))return c.long?function(o){var i=Math.abs(o);if(i>=n)return a(o,i,n,"day");if(i>=r)return a(o,i,r,"hour");if(i>=t)return a(o,i,t,"minute");if(i>=e)return a(o,i,e,"second");return o+" ms"}(s):function(o){var i=Math.abs(o);if(i>=n)return Math.round(o/n)+"d";if(i>=r)return Math.round(o/r)+"h";if(i>=t)return Math.round(o/t)+"m";if(i>=e)return Math.round(o/e)+"s";return o+"ms"}(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))},I}function U(){return k||(k=1,function(e,t){var r;t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||function(){},e.exports=(K||(K=1,j=function(e){function t(e){var n,o,i,a=null;function s(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];if(s.enabled){var i=s,a=Number(new Date),c=a-(n||a);i.diff=c,i.prev=n,i.curr=a,n=a,r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var u=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,n){if("%%"===e)return"%";u++;var o=t.formatters[n];if("function"==typeof o){var a=r[u];e=o.call(i,a),r.splice(u,1),u--}return e})),t.formatArgs.call(i,r),(i.log||t.log).apply(i,r)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(o!==t.namespaces&&(o=t.namespaces,i=t.enabled(e)),i)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){var n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(c(t.names.map(n)),c(t.skips.map(n).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){var r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=P(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(r){t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var r=0,n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}),j)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}(R,R.exports)),R.exports}var x,N,T,L=function(){if(D)return F;D=1;var e=U()("cookie");function t(){var e;try{e=document.cookie}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}return function(e){var t,r={},o=e.split(/ *; */);if(""==o[0])return r;for(var i=0;i<o.length;++i)r[n((t=o[i].split("="))[0])]=n(t[1]);return r}(e)}function r(t){try{return encodeURIComponent(t)}catch(r){e("error `encode(%o)` - %o",t,r)}}function n(t){try{return decodeURIComponent(t)}catch(r){e("error `decode(%o)` - %o",t,r)}}return F=function(e,n,o){switch(arguments.length){case 3:case 2:return function(e,t,n){n=n||{};var o=r(e)+"="+r(t);null==t&&(n.maxage=-1);n.maxage&&(n.expires=new Date(+new Date+n.maxage));n.path&&(o+="; path="+n.path);n.domain&&(o+="; domain="+n.domain);n.expires&&(o+="; expires="+n.expires.toUTCString());n.samesite&&(o+="; samesite="+n.samesite);n.secure&&(o+="; secure");document.cookie=o}(e,n,o);case 1:return function(e){return t()[e]}(e);default:return t()}},F}(),q=E(L),G={exports:{}};function M(){if(N)return x;N=1;var e=U()("cookie");function t(){var e;try{e=document.cookie}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}return function(e){var t,r={},o=e.split(/ *; */);if(""==o[0])return r;for(var i=0;i<o.length;++i)r[n((t=o[i].split("="))[0])]=n(t[1]);return r}(e)}function r(t){try{return encodeURIComponent(t)}catch(r){e("error `encode(%o)` - %o",t,r)}}function n(t){try{return decodeURIComponent(t)}catch(r){e("error `decode(%o)` - %o",t,r)}}return x=function(e,n,o){switch(arguments.length){case 3:case 2:return function(e,t,n){n=n||{};var o=r(e)+"="+r(t);null==t&&(n.maxage=-1);n.maxage&&(n.expires=new Date(+new Date+n.maxage));n.path&&(o+="; path="+n.path);n.domain&&(o+="; domain="+n.domain);n.expires&&(o+="; expires="+n.expires.toUTCString());n.secure&&(o+="; secure");document.cookie=o}(e,n,o);case 1:return function(e){return t()[e]}(e);default:return t()}},x}var B=(T||(T=1,function(e,t){var r=M();function n(e){for(var r=t.cookie,n=t.levels(e),o=0;o<n.length;++o){var i="__tld__",a=n[o],s={domain:"."+a};if(r(i,1,s),r(i))return r(i,null,s),a}return""}n.levels=function(e){var t,r,n=("function"!=typeof window.URL?(t=e,(r=document.createElement("a")).href=t,r.hostname):new URL(e).hostname).split("."),o=n[n.length-1],i=[];if(4===n.length&&o===parseInt(o,10))return i;if(n.length<=1)return i;for(var a=n.length-2;a>=0;--a)i.push(n.slice(a).join("."));return i},n.cookie=r,t=e.exports=n}(G,G.exports)),G.exports),V=E(B);function Y(e){return null!=e&&"object"===l(e)&&!0===e["@@functional/placeholder"]}function H(e){return function t(r){return 0===arguments.length||Y(r)?t:e.apply(this,arguments)}}function W(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return Y(r)?t:H((function(t){return e(r,t)}));default:return Y(r)&&Y(n)?t:Y(r)?H((function(t){return e(t,n)})):Y(n)?H((function(t){return e(r,t)})):e(r,n)}}}function J(e){return function t(r,n,o){switch(arguments.length){case 0:return t;case 1:return Y(r)?t:W((function(t,n){return e(r,t,n)}));case 2:return Y(r)&&Y(n)?t:Y(r)?W((function(t,r){return e(t,n,r)})):Y(n)?W((function(t,n){return e(r,t,n)})):H((function(t){return e(r,n,t)}));default:return Y(r)&&Y(n)&&Y(o)?t:Y(r)&&Y(n)?W((function(t,r){return e(t,r,o)})):Y(r)&&Y(o)?W((function(t,r){return e(t,n,r)})):Y(n)&&Y(o)?W((function(t,n){return e(r,t,n)})):Y(r)?H((function(t){return e(t,n,o)})):Y(n)?H((function(t){return e(r,t,o)})):Y(o)?H((function(t){return e(r,n,t)})):e(r,n,o)}}}var z=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function $(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}function Z(e,t,r){for(var n=0,o=r.length;n<o;){if(e(t,r[n]))return!0;n+=1}return!1}function Q(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var X="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},ee=Object.prototype.toString,te=function(){return"[object Arguments]"===ee.call(arguments)?function(e){return"[object Arguments]"===ee.call(e)}:function(e){return Q("callee",e)}}(),re=!{toString:null}.propertyIsEnumerable("toString"),ne=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],oe=function(){return arguments.propertyIsEnumerable("length")}(),ie=function(e,t){for(var r=0;r<e.length;){if(e[r]===t)return!0;r+=1}return!1},ae="function"!=typeof Object.keys||oe?H((function(e){if(Object(e)!==e)return[];var t,r,n=[],o=oe&&te(e);for(t in e)!Q(t,e)||o&&"length"===t||(n[n.length]=t);if(re)for(r=ne.length-1;r>=0;)Q(t=ne[r],e)&&!ie(n,t)&&(n[n.length]=t),r-=1;return n})):H((function(e){return Object(e)!==e?[]:Object.keys(e)})),se=H((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function ce(e,t,r,n){var o=$(e);function i(e,t){return ue(e,t,r.slice(),n.slice())}return!Z((function(e,t){return!Z(i,t,e)}),$(t),o)}function ue(e,t,r,n){if(X(e,t))return!0;var o,i,a=se(e);if(a!==se(t))return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(a){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(o=e.constructor,null==(i=String(o).match(/^function (\w*)/))?"":i[1]))return e===t;break;case"Boolean":case"Number":case"String":if(l(e)!==l(t)||!X(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!X(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var s=r.length-1;s>=0;){if(r[s]===e)return n[s]===t;s-=1}switch(a){case"Map":return e.size===t.size&&ce(e.entries(),t.entries(),r.concat([e]),n.concat([t]));case"Set":return e.size===t.size&&ce(e.values(),t.values(),r.concat([e]),n.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=ae(e);if(c.length!==ae(t).length)return!1;var u=r.concat([e]),f=n.concat([t]);for(s=c.length-1;s>=0;){var d=c[s];if(!Q(d,t)||!ue(t[d],e[d],u,f))return!1;s-=1}return!0}var le=W((function(e,t){return ue(e,t,[],[])}));function fe(e){return"[object Object]"===Object.prototype.toString.call(e)}function de(e,t,r){if(r||(r=new pe),function(e){var t=l(e);return null==e||"object"!=t&&"function"!=t}(e))return e;var n,o=function(t){var n=r.get(e);if(n)return n;for(var o in r.set(e,t),e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=de(e[o],!0,r));return t};switch(se(e)){case"Object":return o(Object.create(Object.getPrototypeOf(e)));case"Array":return o(Array(e.length));case"Date":return new Date(e.valueOf());case"RegExp":return n=e,new RegExp(n.source,n.flags?n.flags:(n.global?"g":"")+(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.sticky?"y":"")+(n.unicode?"u":"")+(n.dotAll?"s":""));case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var pe=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(e,t){var r=this.hash(e),n=this.map[r];n||(this.map[r]=n=[]),n.push([e,t]),this.length+=1},e.prototype.hash=function(e){var t=[];for(var r in e)t.push(Object.prototype.toString.call(e[r]));return t.join()},e.prototype.get=function(e){if(this.length<=180)for(var t in this.map)for(var r=this.map[t],n=0;n<r.length;n+=1){if((i=r[n])[0]===e)return i[1]}else{var o=this.hash(e);if(r=this.map[o])for(n=0;n<r.length;n+=1){var i;if((i=r[n])[0]===e)return i[1]}}},e}(),ye=H((function(e){return null!=e&&"function"==typeof e.clone?e.clone():de(e)}));var me,ge,ve,he,_e=H((function(e){return null!=e&&"function"==typeof e["fantasy-land/empty"]?e["fantasy-land/empty"]():null!=e&&null!=e.constructor&&"function"==typeof e.constructor["fantasy-land/empty"]?e.constructor["fantasy-land/empty"]():null!=e&&"function"==typeof e.empty?e.empty():null!=e&&null!=e.constructor&&"function"==typeof e.constructor.empty?e.constructor.empty():z(e)?[]:function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)?"":fe(e)?{}:te(e)?function(){return arguments}():function(e){var t=Object.prototype.toString.call(e);return"[object Uint8ClampedArray]"===t||"[object Int8Array]"===t||"[object Uint8Array]"===t||"[object Int16Array]"===t||"[object Uint16Array]"===t||"[object Int32Array]"===t||"[object Uint32Array]"===t||"[object Float32Array]"===t||"[object Float64Array]"===t||"[object BigInt64Array]"===t||"[object BigUint64Array]"===t}(e)?e.constructor.from(""):void 0})),be=H((function(e){return null!=e&&le(e,_e(e))})),Ce=J((function(e,t,r){var n,o={};for(n in r=r||{},t=t||{})Q(n,t)&&(o[n]=Q(n,r)?e(n,t[n],r[n]):t[n]);for(n in r)Q(n,r)&&!Q(n,o)&&(o[n]=r[n]);return o})),we=J((function e(t,r,n){return Ce((function(r,n,o){return fe(n)&&fe(o)?e(t,n,o):t(r,n,o)}),r,n)})),Ae=J((function(e,t,r){return we((function(t,r,n){return e(r,n)}),t,r)})),Oe=function(e){return!function(e){return void 0===e}(e)},Ee=function(e){return!function(e){return null===e}(e)&&function(e){return"object"===l(e)}(e)&&!Array.isArray(e)},Ie=function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return ye(t);var r=ye(e);return t.forEach((function(e,t){r[t]=Array.isArray(e)||Ee(e)?Se(r[t],e):e})),r},Se=function(e,t){return Ae(Ie,e,t)},je=function(){return n((function e(t){r(this,e),this.cOpts={},this.options(t),this.isSupportAvailable=this.checkSupportAvailability()}),[{key:"options",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0===arguments.length)return this.cOpts;var t=".".concat(V(window.location.href));return"."===t&&(t=null),this.cOpts=Se({maxage:31536e6,path:"/",domain:t,samesite:"Lax"},e),e.sameDomainCookiesOnly&&delete this.cOpts.domain,this.cOpts}},{key:"set",value:function(e,t){try{return q(e,t,ye(this.cOpts)),!0}catch(r){return m(r),!1}}},{key:"get",value:function(e){return q(e)}},{key:"remove",value:function(e){try{return q(e,null,ye(this.cOpts)),!0}catch(t){return!1}}},{key:"checkSupportAvailability",value:function(){var e="test_rudder_cookie";return this.set(e,!0),!!this.get(e)&&(this.remove(e),!0)}}])}(),Ke=new je({}),ke={LOG:{value:0,method:console.log},INFO:{value:1,method:console.info},DEBUG:{value:2,method:console.debug},WARN:{value:3,method:console.warn},ERROR:{value:4,method:console.error}},Fe=function(){return n((function e(t,n){r(this,e),this.level=+n||ke.ERROR.value,this.scope=t||""}),[{key:"setLogLevel",value:function(e){if(e&&"string"==typeof e){var t=e.toUpperCase();this.level=ke[t]?ke[t].value:this.level}}},{key:"setScope",value:function(e){this.scope=e||this.scope}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,ke.LOG.value)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,ke.INFO.value)}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,ke.DEBUG.value)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,ke.WARN.value)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logBase(t,ke.ERROR.value)}},{key:"logBase",value:function(e,t){if(this.level<=t){var r=Object.values(ke).find((function(e){return e.value===t}));r.method.apply(r,c(this.getLogData(e)))}}},{key:"getLogData",value:function(e){if(Array.isArray(e)&&e.length>0){var t="%c RS SDK";this.scope&&(t="".concat(t," - ").concat(this.scope));var r=e[0].trim();t="".concat(t," %c ").concat(r);var n=[];return n.push(t),n.push("font-weight: bold; background: black; color: white;"),n.push("font-weight: normal;"),n.push.apply(n,c(e.slice(1))),n}return e}}])}(),De=["item_id","itemId","product_id","item_name","itemName","name","coupon","item_brand","itemBrand","brand","item_variant","itemVariant","variant","price","quantity","index","position","affiliation","discount","item_category","itemCategory","category","item_category2","item_category3","item_category4","item_category5","item_list_id","item_list_name","location_id"],Re=[{sourceKeys:["product_id","itemId"],destKey:"item_id"},{sourceKeys:["name","itemName"],destKey:"item_name"},{sourceKeys:"coupon",destKey:"coupon"},{sourceKeys:["brand","itemBrand"],destKey:"item_brand"},{sourceKeys:["variant","itemVariant"],destKey:"item_variant"},{sourceKeys:"price",destKey:"price",metadata:{type:"toNumber"}},{sourceKeys:"quantity",destKey:"quantity",metadata:{type:"toNumber"}},{sourceKeys:"position",destKey:"index",metadata:{type:"toNumber"}},{sourceKeys:"affiliation",destKey:"affiliation"},{sourceKeys:"discount",destKey:"discount"},{sourceKeys:["category","itemCategory"],destKey:"item_category"},{sourceKeys:"item_category2",destKey:"item_category2"},{sourceKeys:"item_category3",destKey:"item_category3"},{sourceKeys:"item_category4",destKey:"item_category4"},{sourceKeys:"item_category5",destKey:"item_category5"},{sourceKeys:"item_list_id",destKey:"item_list_id"},{sourceKeys:"item_list_name",destKey:"item_list_name"},{sourceKeys:"location_id",destKey:"location_id"}],Pe={method:{sourceKeys:"properties.method",destKey:"method"},product_cart_shared_method:{sourceKeys:"properties.share_via",destKey:"method"},currency:{sourceKeys:"properties.currency",destKey:"currency",metadata:{defaultValue:"USD"}},value:{sourceKeys:["properties.total","properties.value","properties.revenue","properties.price"],destKey:"value",metadata:{type:"toNumber"}},product_add_or_remove_value:{sourceKeys:["properties.total","properties.value","properties.revenue",{operation:"multiplication",args:[{sourceKeys:"properties.price"},{sourceKeys:"properties.quantity",defaultVal:1}]}],destKey:"value",metadata:{type:"toNumber"}},search:{sourceKeys:"properties.query",destKey:"search_term"},list_id:{sourceKeys:"properties.list_id",destKey:"item_list_id"},list_name:{sourceKeys:"properties.category",destKey:"item_list_name"},creative_name:{sourceKeys:["properties.creative_name","properties.creative"],destKey:"creative_name"},creative_slot:{sourceKeys:["properties.creative_slot","properties.position"],destKey:"creative_slot"},promotion_id:{sourceKeys:"properties.promotion_id",destKey:"promotion_id"},promotion_name:{sourceKeys:["properties.promotion_name","properties.name"],destKey:"promotion_name"},coupon:{sourceKeys:"properties.coupon",destKey:"coupon"},payment_method:{sourceKeys:"properties.payment_method",destKey:"payment_type"},shipping_method:{sourceKeys:"properties.shipping_method",destKey:"shipping_tier"},order_id:{sourceKeys:"properties.order_id",destKey:"transaction_id"},shipping:{sourceKeys:"properties.shipping",destKey:"shipping",metadata:{type:"toNumber"}},tax:{sourceKeys:"properties.tax",destKey:"tax",metadata:{type:"toNumber"}},content_type:{sourceKeys:"properties.content_type",destKey:"content_type"},item_id:{sourceKeys:["properties.item_id","properties.product_id","properties.sku"],destKey:"item_id"},cart_shared_item_id:{sourceKeys:["properties.item_id","properties.cart_id"],destKey:"item_id"},url:{sourceKeys:["properties.url","context.page.url"],destKey:"page_location"},referrer:{sourceKeys:["properties.referrer","context.page.referrer"],destKey:"page_referrer"},title:{sourceKeys:["properties.title","context.page.title"],destKey:"page_title"}},Ue={LOGIN:{event:"login",mapping:[Pe.method]},SIGN_UP:{event:"sign_up",mapping:[Pe.method]},GENERATE_LEAD:{event:"generate_lead",mapping:[Pe.currency,s(s({},Pe.value),{},{required:!0})]},PRODUCTS_SEARCHED:{event:"search",mapping:[Pe.search]},PRODUCT_SEARCHED:{event:"search",mapping:[Pe.search]},PRODUCT_LIST_VIEWED:{event:"view_item_list",itemList:"YES",mapping:[Pe.list_id,Pe.list_name]},PROMOTION_VIEWED:{event:"view_promotion",itemList:"YES",mapping:[Pe.promotion_id,Pe.creative_slot,Pe.creative_name,Pe.promotion_name]},PROMOTION_CLICKED:{event:"select_promotion",itemList:"NO",mapping:[Pe.promotion_id,Pe.creative_slot,Pe.creative_name,Pe.promotion_name]},PRODUCT_CLICKED:{event:"select_item",item:"YES",mapping:[Pe.list_id,Pe.list_name]},PRODUCTS_CLICKED:{event:"select_item",item:"YES",mapping:[Pe.list_id,Pe.list_name]},PRODUCT_VIEWED:{event:"view_item",item:"YES",mapping:[Pe.currency,s(s({},Pe.value),{},{required:!0})]},PRODUCT_ADDED:{event:"add_to_cart",itemList:"NO",item:"YES",mapping:[Pe.currency,s(s({},Pe.product_add_or_remove_value),{},{required:!0})]},PRODUCT_REMOVED:{event:"remove_from_cart",itemList:"NO",item:"YES",mapping:[Pe.currency,s(s({},Pe.product_add_or_remove_value),{},{required:!0})]},CART_VIEWED:{event:"view_cart",itemList:"YES",mapping:[Pe.currency,s(s({},Pe.value),{},{required:!0})]},CHECKOUT_STARTED:{event:"begin_checkout",itemList:"YES",mapping:[Pe.currency,Pe.coupon,s(s({},Pe.value),{},{required:!0})]},PAYMENT_INFO_ENTERED:{event:"add_payment_info",itemList:"YES",mapping:[Pe.currency,Pe.coupon,Pe.payment_method,s(s({},Pe.value),{},{required:!0})]},CHECKOUT_STEP_COMPLETED:{event:"add_shipping_info",itemList:"YES",mapping:[Pe.currency,Pe.coupon,Pe.shipping_method,s(s({},Pe.value),{},{required:!0})]},ORDER_COMPLETED:{event:"purchase",itemList:"YES",mapping:[Pe.tax,Pe.coupon,Pe.shipping,Pe.currency,s(s({},Pe.value),{},{required:!0}),s(s({},Pe.order_id),{},{required:!0})]},ORDER_REFUNDED:{event:"refund",itemList:"NO",mapping:[Pe.tax,Pe.coupon,Pe.shipping,Pe.currency,s(s({},Pe.value),{},{required:!0}),s(s({},Pe.order_id),{},{required:!0})]},PRODUCT_ADDED_TO_WISHLIST:{event:"add_to_wishlist",itemList:"NO",item:"YES",mapping:[Pe.currency,s(s({},Pe.value),{},{required:!0})]},PRODUCT_SHARED:{event:"share",mapping:[Pe.item_id,Pe.content_type,Pe.product_cart_shared_method]},CART_SHARED:{event:"share",mapping:[Pe.content_type,Pe.cart_shared_item_id,Pe.product_cart_shared_method]},PAGE:{event:"page_view",mapping:[Pe.url,Pe.title,Pe.referrer]}},xe=[Ue.PRODUCT_CLICKED.event,Ue.PRODUCT_VIEWED.event,Ue.PRODUCT_ADDED.event,Ue.PRODUCT_REMOVED.event,Ue.PRODUCT_ADDED_TO_WISHLIST.event];for(var Ne=function(){if(he)return ve;he=1;var e=ge?me:(ge=1,me=function(e){return null!=e&&"object"===l(e)&&!1===Array.isArray(e)});function t(e,t,r){return"function"==typeof r.join?r.join(e):e[0]+t+e[1]}function r(e,t,r){return"function"!=typeof r.isValid||r.isValid(e,t)}function n(t){return e(t)||Array.isArray(t)||"function"==typeof t}return ve=function(o,i,a){if(e(a)||(a={default:a}),!n(o))return void 0!==a.default?a.default:o;"number"==typeof i&&(i=String(i));var s=Array.isArray(i),c="string"==typeof i,u=a.separator||".",l=a.joinChar||("string"==typeof u?u:".");if(!c&&!s)return o;if(c&&i in o)return r(i,o,a)?o[i]:a.default;var f=s?i:function(e,t,r){if("function"==typeof r.split)return r.split(e);return e.split(t)}(i,u,a),d=f.length,p=0;do{var y=f[p];for("number"==typeof y&&(y=String(y));y&&"\\"===y.slice(-1);)y=t([y.slice(0,-1),f[++p]||""],l,a);if(y in o){if(!r(y,o,a))return a.default;o=o[y]}else{for(var m=!1,g=p+1;g<d;)if(m=(y=t([y,f[g++]],l,a))in o){if(!r(y,o,a))return a.default;o=o[y],p=g-1;break}if(!m)return a.default}}while(++p<d&&n(o));return p===d?o:a.default}}(),Te=E(Ne),Le=256;Le--;)(Le+256).toString(16).substring(1);for(var qe=0;qe<256;qe++)(qe+256).toString(16).substring(1);function Ge(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,o=r;return n.has(e)?(o[t]="[Circular Reference]",r):(n.add(e),Object(e)!==e?o[t]=e:Array.isArray(e)?function(){for(var r=e.length,i=0;i<r;i+=1)Ge(e[i],t?"".concat(t,".").concat(i):"".concat(i),o,n);0===r&&(o[t]=[])}():function(){var r=!0;Object.keys(e).forEach((function(i){r=!1,Ge(e[i],t?"".concat(t,".").concat(i):i,o,n)})),r&&(o[t]={})}(),n.delete(e),o)}function Me(e){return Ge(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{})}function Be(e,t,r,n){var o=[],i=t||{};return Array.isArray(r)?r.forEach((function(t){var r=Te(e,t);r&&(Object.keys(r).forEach((function(e){n.includes(e)||o.push(e)})),o.forEach((function(e){void 0!==r[e]&&(i[e]=Te(r,e))})))})):"root"===r?(Object.keys(e).forEach((function(e){n.includes(e)||o.push(e)})),o.forEach((function(t){void 0!==e[t]&&(i[t]=Te(e,t))}))):p("unable to parse keys"),i}var Ve=function(e){return Oe(e)&&function(e){return null!==e}(e)},Ye=function(e){var t=e.message,r=e.operationObject,n=r.operation,i=r.args.map((function(e){var r=e.sourceKeys,n=e.defaultVal,o=Te(t,r);return o||!1===o||0===o?o:n}));if(!i.every((function(e){return Ve(e)})))return null;var a=null;switch(n){case"multiplication":a=1;var s,c=o(i);try{for(c.s();!(s=c.n()).done;){var u=s.value;if("number"!=typeof u)return null;a*=u}}catch(p){c.e(p)}finally{c.f()}return a.toFixed(2);case"addition":a=0;var l,f=o(i);try{for(f.s();!(l=f.n()).done;){var d=l.value;if("number"!=typeof d)return null;a+=d}}catch(p){f.e(p)}finally{f.f()}return a.toFixed(2);default:return null}},He=function(e,t){var r=e,n={jsonStringify:function(){r=JSON.stringify(e)},jsonStringifyOnObject:function(){"string"!=typeof e&&(r=JSON.stringify(e))},toString:function(){r=String(e)},toNumber:function(){r=Number(e)},toFloat:function(){r=parseFloat(e)},toInt:function(){r=parseInt(e,10)},toLower:function(){r=e.toString().toLowerCase()},trim:function(){"string"==typeof e&&(r=e.trim())},IsBoolean:function(){r=!0,"boolean"!=typeof e&&(p("Boolean value missing, so dropping it"),r=!1)}};t in n&&(0,n[t])();return r},We=function(e,t){var r={};return Array.isArray(t)&&t.length>0&&t.forEach((function(t){var n=t.sourceKeys,i=t.destKey,a=t.metadata,s=function(e,t){if(!t)return e;var r=t.type,n=t.defaultValue;if(!Ve(e))return n||e;var o=e;return r&&(Array.isArray(r)?r.forEach((function(e){o=He(o,e)})):o=He(o,r)),o}(function(e,t){if(Array.isArray(t)&&t.length>0){var r,n=o(t);try{for(n.s();!(r=n.n()).done;){var i=r.value,a=void 0;if((a="object"===l(i)?Ye({message:e,operationObject:i}):Te(e,i))||!1===a||0===a)return a}}catch(s){n.e(s)}finally{n.f()}return null}return"object"===l(t)?Ye({message:e,operationObject:t}):Te(e,t)}(e,n),a);(s||0===s||!1===s)&&i&&(r[i]=s)})),r};function Je(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",o={};return function e(i,a){var s,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(c.has(i))o[a]="[Circular Reference]";else{if(c.add(i),Object(i)!==i)o[a]=i;else if(Array.isArray(i)){for(s=0,t=i.length;s<t;s+=1)e(i[s],"strict"===n?"".concat(a).concat(r).concat(s):"".concat(a,"[").concat(s,"]"),c);0===t&&(o[a]=[])}else{var u=!0;Object.keys(i).forEach((function(t){u=!1,e(i[t],a?"".concat(a).concat(r).concat(t):t,c)})),u&&a&&(o[a]={})}c.delete(i)}}(e,""),o}var ze=new Fe(O),$e=function(e){return e.split(".").pop()},Ze=function(e){var t={};return"object"!==l(e)||Array.isArray(e)?e:(Object.keys(e).forEach((function(r){var n=e[r];("items"===r||"object"!==l(n)&&!function(e){return"string"==typeof e&&be(e.trim())}(n))&&(t[r]=n)})),t)},Qe=function(e,t,r){var n={};return n=Be(e,n,t,r),b(n)||(n=Je(n,"_","strict")),n},Xe=function(e){var t=[],r=e.properties,n=null==r?void 0:r.products,o=!1;return"object"!==l(n)||Array.isArray(n)||(o=!0,n=[n]),Array.isArray(n)&&n.forEach((function(r,n){var i=We(r,Re),a=Be(e,{},o?["properties.products"]:["properties.products.".concat(n)],De);b(a)||(i=Ze(s(s({},i),Je(a,"_","strict")))),b(i)||t.push(i)})),t},et=function(e){var t=e.properties,r=[];if(t&&Object.keys(t).length>0){var n=We(t,Re);b(n)||r.push(n)}return r},tt=function(e,t){var r=t.event,n=t.mapping,o=We(e,n);if(Array.isArray(n)&&n.length>0&&n.some((function(e){return t=o[e.destKey],!(Oe(t)&&function(e){return null!=e}(t)||!e.required)&&(ze.error("Missing required value from ".concat(JSON.stringify(e.sourceKeys))),!0);var t})))return null;var i=function(e,t){var r=t.itemList,n=t.item,o=[],i=!1;return r&&n?(o=Xe(e))&&o.length>0||(i=!0,o=et(e)):n?(i=!0,o=et(e)):r&&(o=Xe(e)),{items:o,mapRootLevelPropertiesToGA4ItemsArray:i}}(e,t),a=i.items,c=function(e,t,r){var n=t.reduce((function(e,t){var r=t.sourceKeys;return"string"==typeof r?e.push($e(r)):Array.isArray(r)&&r.forEach((function(t){"string"==typeof t&&e.push($e(t))})),e}),[]);return n.push("products"),e&&xe.includes(r)&&(n=n.concat(De)),n}(i.mapRootLevelPropertiesToGA4ItemsArray,n,r),u=Qe(e,["properties"],c);return a.length>0&&(o.items=a),b(u)||(o=s(s({},o),u)),o},rt=function(e,t){var r=Ue["".concat(t.toUpperCase())],n=r?tt(e,r):function(e){return Qe(e,["properties"],[])}(e);return n?{params:Ze(n),event:r?r.event:t}:null},nt=new Fe(O),ot=function(){return n((function e(t,n,o){var i;r(this,e),n.logLevel&&nt.setLogLevel(n.logLevel),this.name=A,this.clientId="",this.sessionId="",this.sessionNumber="",this.cookie=Ke,this.sendUserId=!0,this.analytics=n,this.measurementId=t.measurementId,this.debugView=t.debugView||!1,this.capturePageView=t.capturePageView||"rs",this.isHybridModeEnabled="hybrid"===t.connectionMode,this.piiPropertiesToIgnore=t.piiPropertiesToIgnore||[],this.extendPageViewParams=t.extendPageViewParams||!1,this.overrideClientAndSessionId=t.overrideClientAndSessionId||!1,this.sdkBaseUrl=(null!=(i=t.sdkBaseUrl)&&i.endsWith("/")?i.replace(/\/+$/,""):i)||"https://www.googletagmanager.com",this.serverContainerUrl=t.serverContainerUrl||null,this.isExtendedGa4_V2=t.isExtendedGa4_V2||!1;var a=null!=o?o:{};this.shouldApplyDeviceModeTransformation=a.shouldApplyDeviceModeTransformation,this.propagateEventsUntransformedOnError=a.propagateEventsUntransformedOnError,this.destinationId=a.destinationId}),[{key:"loadScript",value:function(e,t){var r=this;window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);var n,o,i,a={};if(Ve(this.serverContainerUrl)&&(a.server_container_url=this.serverContainerUrl),"rs"===this.capturePageView&&(a.send_page_view=!1),this.sendUserId=(n=this.analytics.loadOnlyIntegrations,null===(o=null==n||null===(i=n.GA4)||void 0===i?void 0:i.sendUserId)||void 0===o||o),this.sendUserId&&this.analytics.getUserId()&&(a.user_id=this.analytics.getUserId()),this.isHybridModeEnabled&&this.overrideClientAndSessionId)a.cookie_prefix="rs",a.client_id=this.analytics.getAnonymousId(),a.session_id=this.analytics.getSessionId();else if(!this.isExtendedGa4_V2){var s=this.cookie.get("rs_ga"),c=this.cookie.get("_ga"),u=this.measurementId.split("-"),l=this.cookie.get("rs_ga_".concat(u[1]));if(!c&&s&&l){var f=s.split("."),d=f.length>3?"".concat(f[2],".").concat(f[3]):f[2],p=l.split(".")[2];d&&(a.client_id=d),p&&(a.session_id=p)}this.cookie.remove("rs_ga"),this.cookie.remove("rs_ga_".concat(u[1]))}this.debugView&&(a.debug_mode=!0),0===Object.keys(a).length?window.gtag("config",e):window.gtag("config",e,a),window.gtag("get",this.measurementId,"session_id",(function(e){r.sessionId=e})),window.gtag("get",this.measurementId,"client_id",(function(e){r.clientId=e})),window.gtag("get",this.measurementId,"session_number",(function(e){r.sessionNumber=e})),function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(document.getElementById(e))return;var n=document.createElement("script");n.src=t,n.async=void 0===r.async||r.async,n.type="text/javascript",n.id=e,!0!==r.skipDatasetAttributes&&(n.setAttribute("data-loader",g),void 0!==r.isNonNativeSDK&&n.setAttribute("data-isNonNativeSDK",r.isNonNativeSDK));var o=document.getElementsByTagName("head");if(o.length>0)o[0].insertBefore(n,o[0].firstChild);else{var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)}}catch(i){w(i)}}("google-analytics 4","".concat(t,"/gtag/js?id=").concat(e))}},{key:"init",value:function(){this.loadScript(this.measurementId,this.sdkBaseUrl)}},{key:"isLoaded",value:function(){return!(!this.sessionId||!this.clientId)}},{key:"isReady",value:function(){return this.isLoaded()}},{key:"identify",value:function(e){var t=e.message,r=t.context.traits,n=function(e,t){var r=[],n={},o=t,i={};return e.length>0&&e.forEach((function(e){"string"==typeof e.piiProperty&&""!==e.piiProperty.trim()&&r.push(e.piiProperty.trim())})),Object.keys(o).forEach((function(e){var t=o[e];r.includes(e)?n[e]=null:i[e]=t})),s(s({},n),i)}(this.piiPropertiesToIgnore,r);if(Object.keys(n).length>0&&window.gtag("set","user_properties",n),this.sendUserId&&t.userId){var o=t.userId;window.gtag("config",this.measurementId,{user_id:o})}}},{key:"track",value:function(e){if(!this.isHybridModeEnabled){var t=e.message,r=function(e){if(!e||"string"!=typeof e)return ze.error("Event name is required and should be a string"),null;var t=e.trim().replace(/\s+/g,"_");return["click","error","scroll","form_start","form_submit","first_open","first_visit","app_remove","video_start","session_start","view_complete","file_download","video_progress","user_engagement","in_app_purchase","app_store_refund","app_store_subscription_cancel","app_store_subscription_renew"].includes(t)?(ze.error("Reserved event name ".concat(t," is not allowed")),null):t}(null==t?void 0:t.event);if(r){var n=rt(t,r);if(n){var o=n.params,i=n.event,a=this.addSendToAndMeasurementIdToPayload(o,e);window.gtag("event",i,a)}}else nt.error("Event name is required")}}},{key:"page",value:function(e){if("rs"===this.capturePageView){var t=e.message,r=t.properties,n=We(t,Ue.PAGE.mapping);n=this.addSendToAndMeasurementIdToPayload(n,e),this.extendPageViewParams?window.gtag("event","page_view",s(s({},Me(r)),n)):window.gtag("event","page_view",n)}}},{key:"group",value:function(e){if(!this.isHybridModeEnabled){var t=e.message,r=t.groupId,n=t.traits,o=s({group_id:r},n=this.addSendToAndMeasurementIdToPayload(n,e));window.gtag("event","join_group",o)}}},{key:"addSendToAndMeasurementIdToPayload",value:function(e,t){var r=t.message.userId,n=e;return n.send_to=this.measurementId,this.sendUserId&&r&&(n.user_id=r),n}},{key:"getDataForIntegrationsObject",value:function(){return i({},O,{clientId:this.clientId,sessionId:this.sessionId,sessionNumber:this.sessionNumber})}},{key:"getClientDetails",value:function(){return{clientId:this.clientId,sessionId:this.sessionId,sessionNumber:this.sessionNumber}}}])}();return e.GA4=ot,e}({});
//# sourceMappingURL=GA4.min.js.map
